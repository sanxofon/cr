<!DOCTYPE html>
<html lang="es-MX">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- Search Engine -->
	<meta name="description" content="Una clave rítmica es una pequeña frase o motivo rítmico mínimo que solo toma en cuenta la secuencia de golpes y no las alturas o los timbres. Se representa mediante una secuencia de números donde cada número indica la duración entre golpes sucesivos.">
	<meta name="image" content="https://lengua.la/cr/share.jpg">
	<meta name="author" content="Santiago Chávez Novaro">
	<meta name="robots" content="index, follow">
	<link rel="manifest" href="/cr/manifest.webmanifest">
	<title>Claves Rítmicas v.2.52</title>
	<meta name="theme-color" content="#eeeeee" />
	<!-- Allow web app to be run in full-screen mode. -->
	<meta name="apple-mobile-web-app-capable" content="yes" />
	<meta name="mobile-web-app-capable" content="yes">
	<meta name="application-name" content="Claves Rítmicas">
	<meta name="apple-mobile-web-app-title" content="Claves Rítmicas">
	<meta name="apple-mobile-web-app-status-bar-style" content="white">
	<link rel="apple-touch-icon" href="https://lengua.la/cr/logo.png">
	<!-- Open Graph general (Facebook, Pinterest & Google+) -->
	<meta name="og:title" content="Claves Rítmicas v2">
	<meta name="og:description" content="Una clave rítmica es una pequeña frase o motivo rítmico mínimo que solo toma en cuenta la secuencia de golpes y no las alturas o los timbres. Se representa mediante una secuencia de números donde cada número indica la duración entre golpes sucesivos.">
	<meta name="og:image" content="https://lengua.la/cr/share.jpg">
	<meta name="og:url" content="https://lengua.la/cr/">
	<meta name="og:site_name" content="Claves Rítmicas">
	<meta name="og:locale" content="es_MX">
	<meta name="og:type" content="app">
	<meta name="website:author" content="Santiago Chávez Novaro">
	<!-- Schema.org for Google -->
	<meta itemprop="name" content="Claves Rítmicas">
	<meta itemprop="description" content="Una clave rítmica es una pequeña frase o motivo rítmico mínimo que solo toma en cuenta la secuencia de golpes y no las alturas o los timbres. Se representa mediante una secuencia de números donde cada número indica la duración entre golpes sucesivos.">
	<meta itemprop="image" content="https://lengua.la/cr/share.jpg">
	<!-- Twitter -->
	<meta name="twitter:card" content="summary">
	<meta name="twitter:title" content="Claves Rítmicas">
	<meta name="twitter:description" content="Una clave rítmica es una pequeña frase o motivo rítmico mínimo que solo toma en cuenta la secuencia de golpes y no las alturas o los timbres. Se representa mediante una secuencia de números donde cada número indica la duración entre golpes sucesivos.">
	<meta name="twitter:site" content="@sanxofon">
	<meta name="twitter:creator" content="@sanxofon">
	<meta name="twitter:image:src" content="https://lengua.la/cr/share.jpg">
	<!-- Disable automatic phone number detection. -->
	<meta name="format-detection" content="telephone=no">
	<!-- FAVICON -->
	<link rel="shortcut icon" href="https://lengua.la/cr/logo.png" type="image/png">
	<link rel="icon" href="https://lengua.la/cr/logo.png" type="image/png">

	<!-- CSS -->
	<link href="cr-demo.css" rel="stylesheet">
	<!-- Memoria Add On CSS -->
	<link href="cr-memoria.css" rel="stylesheet">
	<!-- SETTINGS Modal -->
	<link rel="stylesheet" href="settings-modal.css">
</head>
<body>
	<div class="centro">
		<canvas id="circle" width="360" height="360"></canvas>
	</div>
	<div class="centro colder">
		<div class="titulo">Claves Rítmicas</div>
		<div>
			<div class="inputLine1">
				<input title="Ver Claves" class="escalar" type="checkbox" id="addClavesOperacion" name="addClavesOperacion" value="1" onchange="window.addClavesOperacion = this.checked; saveCheckboxState(this.id, this.checked); go();"><input title="Ingrese Claves y Operaciones" type="text" id="clave" placeholder="CLAVES" onchange="go();"><button class="toggle round-right" onclick="go();">✔</button>
			</div>
			<div class="inputLine">
				<input title="Ver Resultado" class="escalar" type="checkbox" id="addClaveResultado" name="addClaveResultado" value="1" onchange="window.addClaveResultado = this.checked; saveCheckboxState(this.id, this.checked); go();"><input title="Clave resultado" type="text" id="claveResult" placeholder="RESULTADO" readonly="readonly"><input title="Clave resultado expandida" type="text" id="claveExpand" value="" readonly="readonly" style="display:none;"><button onclick="toggleInputVisibility();" title="Toggle view" class="toggle smallt">_</button><button onclick="rotateClaveResult(-1);" title="Move Left" class="toggli smallt">&lAarr;</button><button onclick="rotateClaveResult(1);" title="Move Right" class="toggln smallt round-right">&rAarr;</button>
			</div>
			<div class="inputLine">
				<button id="playButton" class="playButton" onclick="togglePlay();">▶</button>
				<input title="Velocidad o Tempo" type="range" id="tempoSlider" min="1" max="3000" step="1" oninput="updateTempo()">
				<input title="Valor del Tempo" type="number" id="tempoValue" min="1" max="3000" step="1" onchange="updateTempoFromInput()">
				<select id="tempoType">
					<option value="cpm">CPM</option>
					<option value="bpm">BPM</option>
				</select>
			</div>
			<div class="opciones">
				<input type="checkbox" id="addCircleMarks" name="addCircleMarks" value="1" onchange="window.addCircleMarks = this.checked; saveCheckboxState(this.id, this.checked); go();">
				<label for="addCircleMarks">Ver Marcas</label>
				<input type="checkbox" id="inptLightDark" name="inptLightDark" value="1" onchange="saveCheckboxState(this.id, this.checked); toggleLightDark()">
				<label for="inptLightDark">Claroscuro</label>
				<input type="checkbox" id="inptVerCuadros" name="inptVerCuadros" value="1" onchange="window.inptVerCuadros = this.checked; saveCheckboxState(this.id, this.checked); showHideCuadros()">
				<label for="inptVerCuadros">Ver cuadros</label>
			</div>
			<div class="botones-memoria">
				<button onclick="showInfo();" title="Cómo funcionan las Claves Rítmicas">❔</button>
				<button onclick="shareClave();" title="Compartir Clave Actual">🔗</button>
				<button onclick="saveClave();" title="Guardar Clave">💾</button>
				<button onclick="openClaves();" title="Abrir Claves Guardadas">📂</button>
				<button onclick="importClaves();" title="Importar archivo JSON de Claves">📥</button>
				<button onclick="exportClaves();" title="Exportar archivo JSON de Claves">📦</button>
				<button onclick="printClaves();" title="Imprimir lista de claves">📇</button>
				
				
				<button onclick="clearClaves();" title="Vaciar Memoria de Claves">🧻</button>
			</div>
		</div>
        <div class="square-container-container" id="squareblock"><div id="squareVisualization" class="square-container"></div></div>
    </div>
		
	<div class="footer">
		<a href="https://github.com/sanxofon/cr/" target="_blank">Claves Rítmicas v.2.52</a> - <a href="https://lengua.la">La Lengua</a>
		<br>Esto no es un metrónomo, prueba con: <a href="https://lengua.la/mc/" target="_blank">mc</a> y <a href="https://lengua.la/metro/" target="_blank">metro</a>
	</div>
	<!-- Settings -->
	<div id="settings-button-container">
		<button id="settings-open-btn" class="settings-button" title="Open Settings">
			<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
				<circle cx="12" cy="12" r="3"></circle>
				<path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
			</svg>
		</button>
	</div>
	
	<!-- Manual Info Modal -->
	<div id="info-modal" class="settings-modal">
		<div class="settings-modal-content">
			<div class="settings-modal-header">
				<h2>Claves Rítmicas - Manual</h2>
				<span id="info-close" class="settings-close">&times;</span>
			</div>
			<div class="settings-modal-body" id="info-content">
				<!-- Manual content will be loaded here -->
				<div class="loading">Cargando...</div>
			</div>
			<div class="settings-modal-footer">
				<button id="info-close-btn" class="settings-button settings-cancel-btn">Cerrar</button>
			</div>
		</div>
	</div>
	
	<!-- SETTINGS Modal -->
	<div id="settings-modal" class="settings-modal">
		<div class="settings-modal-content">
			<div class="settings-modal-header">
				<h2>Configuración</h2>
				<span id="settings-close" class="settings-close">&times;</span>
			</div>
			<div class="settings-modal-body">
				<!-- ArrowAngle Setting -->
				<div class="settings-section">
					<h3>Ángulo de la Flecha</h3>
					<div class="settings-control">
						<label for="settings-arrowAngle">Ángulo inicial de la flecha: <span id="settings-arrowAngle-value">7</span></label>
						<input type="range" id="settings-arrowAngle" min="-100" max="-90" step="1" value="-92">
						<p class="settings-help">El Valor debe ser un poco menor a <b>-90</b>. Por ejemplo: <b>-92</b></p>
					</div>
				</div>
				<!-- ArrowAngle Setting -->
				<div class="settings-section">
					<h3>Ángulo de la Flecha</h3>
					<div class="settings-control">
						<label for="settings-arrowAngle">Ángulo inicial de la flecha: <span id="settings-arrowAngle-value">7</span></label>
						<input type="range" id="settings-arrowAngle" min="-100" max="-90" step="1" value="-92">
						<p class="settings-help">El Valor debe ser un poco menor a <b>-90</b>. Por ejemplo: <b>-92</b></p>
					</div>
				</div>
				<!-- Tolerance Setting -->
				<div class="settings-section">
					<h3>Tolerancia</h3>
					<div class="settings-control">
						<label for="settings-tolerance">Tolerancia de detección del Vertex: <span id="settings-tolerance-value">7</span></label>
						<input type="range" id="settings-tolerance" min="1" max="20" value="7">
						<p class="settings-help">Los valores más altos hacen que sea más fácil detectar vértices cuando pasa la flecha pero puede generar repeticiones en velocidades lentas.</p>
					</div>
				</div>
	
				<!-- Sound Delay Setting -->
				<div class="settings-section">
					<h3>Retraso del <i>timeout</i> del sonido</h3>
					<div class="settings-control">
						<label for="settings-sound-delay">Delay (ms): <span id="settings-sound-delay-value">200</span></label>
						<input type="range" id="settings-sound-delay" min="50" max="500" step="10" value="200">
						<p class="settings-help">Controla el tiempo de espera antes de permitir que se reproduzca nuevamente el mismo sonido.</p>
					</div>
				</div>
	
				<!-- Color Palette Setting -->
				<div class="settings-section">
					<h3>Paleta de Colores</h3>
					<div class="settings-colors-container">
						<div class="settings-color-item">
							<label for="settings-color-1">Color 1:</label>
							<input type="color" id="settings-color-1" value="#00FFFF">
						</div>
						<div class="settings-color-item">
							<label for="settings-color-2">Color 2:</label>
							<input type="color" id="settings-color-2" value="#FF0000">
						</div>
						<div class="settings-color-item">
							<label for="settings-color-3">Color 3:</label>
							<input type="color" id="settings-color-3" value="#FFFF00">
						</div>
						<div class="settings-color-item">
							<label for="settings-color-4">Color 4:</label>
							<input type="color" id="settings-color-4" value="#00FF00">
						</div>
						<div class="settings-color-item">
							<label for="settings-color-5">Color 5:</label>
							<input type="color" id="settings-color-5" value="#FF7700">
						</div>
						<div class="settings-color-item">
							<label for="settings-color-6">Color 6:</label>
							<input type="color" id="settings-color-6" value="#0077FF">
						</div>
					</div>
					<button id="settings-reset-colors" class="settings-button settings-reset-btn">Volver a Colores por Defecto</button>
				</div>

				<!-- Clear All -->
				<div class="settings-section">
					<h3>Vaciar memoria y caché</h3>
					<div class="settings-control">
						<label for="settings-sound-delay">No haga esto si no sabe por qué lo hace</label>
						<button id="updateAll" onclick="updateAll()">Actualizar APP</button>
						<p class="settings-help">Todos los datos de la app serán actualizados a la última versión. Las claves del usuario no se modifican pero por seguridad te recomendamos exportar tus claves antes de continuar.</p>
					</div>
				</div>

			</div>

			<div class="settings-modal-footer">
				<button id="settings-save" class="settings-button settings-save-btn">Guardar Configuración</button>
				<button id="settings-cancel" class="settings-button settings-cancel-btn">Cancelar</button>
			</div>
		</div>
	</div>
	<!-- JS -->
	<script>
		// Ver detalles de cada operación en la consola
		const verbose = false;
		// Este código verifica si la API del service worker está disponible. Si está disponible, se registra el service worker de /cr/sw.js una vez que se carga la página.
		if ('serviceWorker' in navigator) {
			window.addEventListener('load', function() {
				navigator.serviceWorker.register('/cr/sw.js').then(function(registration) {
				// Registration was successful
				if(verbose)console.log('ServiceWorker registrado exitosamente en: ', registration.scope);
				}, function(err) {
				// registration failed :(
				console.log('Error en el registro del ServiceWorker: ', err);
				});
			});
		}
	</script>
	<!-- Audio Howler.js library -->
	<script src="howler.min.js" type="text/javascript"></script>
	<!-- QR Code library -->
	<script type="text/javascript" src="qrcode.min.js"></script>
	<!-- Beats sounds in Base64 -->
	<script src="beats.js" type="text/javascript"></script>
	<!-- Main Rhythmic Claves Class -->
	<script src="claves-ritmicas.class.js" type="text/javascript"></script>
	<!-- This Demo JS -->
	<script src="cr-demo.js" type="text/javascript"></script>
	<!-- Memoria Add On JS -->
	<script src="cr-memoria.js" type="text/javascript"></script>
	<!-- Drawing claves special -->
	<script src="cr-draw.js" type="text/javascript"></script>
	<!-- SETTINGS Modal -->
	<script src="settings-modal.js" type="text/javascript"></script>

</body>
</html>